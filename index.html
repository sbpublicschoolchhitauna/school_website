
<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>S.B. Public School â€” Staff + Photo Sliders</title>
<style>
:root{--accent:#0b5fa8;--accent2:#1167b1;--card:#fff;--muted:#54607a}
*{box-sizing:border-box}
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:linear-gradient(180deg,#eaf4ff,#f7fbff);color:#0f172a;padding:12px}
.container{max-width:1100px;margin:0 auto}
.card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 5px 18px rgba(0,0,0,0.06);margin-bottom:16px}
h2{color:var(--accent);margin:0 0 8px 0}
.small{color:var(--muted);font-size:13px}

/* General slider */
.slider-wrap{position:relative;border-radius:12px;overflow:hidden;background:#000;color:#fff}
.slider{display:flex;transition:transform .5s ease}
.slide{min-width:100%;display:flex;align-items:center;justify-content:center}
.slide img{width:100%;height:320px;object-fit:cover}

/* Staff slider */
.staff-slider-wrap{position:relative;border-radius:12px;overflow:hidden}
.staff-slide{min-width:100%;display:flex;gap:12px;align-items:center;padding:12px}
.staff-slide img{width:150px;height:150px;object-fit:cover;border-radius:10px}
.staff-meta{flex:1}
.staff-name{font-weight:800;color:var(--accent);font-size:18px}
.staff-post{color:#444;font-size:14px}

/* Staff grid (list) */
.staff-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;margin-top:10px}
.staff-card{text-align:center;background:#fff;padding:10px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.06)}
.staff-card img{width:100%;height:120px;object-fit:cover;border-radius:8px}
.staff-card .name{font-weight:700;color:var(--accent);margin-top:8px}
.staff-card .post{font-size:13px;color:#555}

/* controls */
.controls{display:flex;gap:8px;justify-content:center;margin-top:8px}
.btn{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <h2>Admission & News</h2>
    <div class="small">Admission ticker and important notices...</div>
  </div>

  <div class="card">
    <h2>General Photo Slider</h2>
    <div id="generalSlider" class="slider-wrap" style="height:320px">
      <div id="generalSliderInner" class="slider"></div>
    </div>
    <div class="controls">
      <button class="btn" onclick="generalPrev()">Prev</button>
      <button class="btn" onclick="generalNext()">Next</button>
    </div>
  </div>

  <div class="card">
    <h2>Staff Showcase (Slider)</h2>
    <div id="staffSlider" class="staff-slider-wrap" style="height:180px">
      <div id="staffSliderInner" class="slider"></div>
    </div>
    <div class="controls">
      <button class="btn" onclick="staffPrev()">Prev</button>
      <button class="btn" onclick="staffNext()">Next</button>
    </div>

    <h2 style="margin-top:12px">All Staff</h2>
    <div id="staffGrid" class="staff-grid"></div>
  </div>

  <div class="card">
    <small>To update staff info: edit <code>data/staff.json</code>. To update photos: replace files in <code>staff/staffphotos/</code> or <code>staff/photoslide/</code></small>
  </div>
</div>

<script>
/* Utility to list files in a folder (works when hosted on static server that can list folder via fetch to a JSON manifest).
   As we are delivering static ZIP, the JS will instead attempt to load a simple manifest file if available.
*/

/* Load staff data */
async function loadStaff(){
  try{
    const res = await fetch('data/staff.json');
    const staff = await res.json();
    return staff;
  }catch(e){
    console.error('staff.json load error', e);
    // generate placeholders if failed
    const arr = [];
    for(let i=1;i<=17;i++) arr.push({id:i,name:'Staff '+i+' Name',post:'Post',photo:'staff'+i+'.jpg'});
    return arr;
  }
}

/* Build general slider from staff/photoslide folder (auto-load names slide1..n if available) */
async function buildGeneralSlider(){
  const container = document.getElementById('generalSliderInner');
  container.innerHTML = '';
  // Try to load images named slide1.jpg ... slide12.jpg as fallback
  for(let i=1;i<=12;i++){
    const src = `staff/photoslide/slide${i}.jpg`;
    const img = new Image();
    img.src = src;
    img.alt = 'Slide '+i;
    img.onload = ()=>{};
    const s = document.createElement('div');
    s.className='slide';
    s.appendChild(img);
    container.appendChild(s);
  }
}

/* Build staff slider and grid */
async function buildStaffUI(){
  const staff = await loadStaff();
  const sliderInner = document.getElementById('staffSliderInner');
  const grid = document.getElementById('staffGrid');
  sliderInner.innerHTML=''; grid.innerHTML='';
  staff.forEach(s=>{
    // slider
    const slide = document.createElement('div');
    slide.className='slide staff-slide';
    const img = document.createElement('img');
    img.src = 'staff/staffphotos/' + s.photo;
    img.alt = s.name;
    const meta = document.createElement('div');
    meta.className='staff-meta';
    meta.innerHTML = `<div class="staff-name">${s.name}</div><div class="staff-post">${s.post}</div>`;
    slide.appendChild(img); slide.appendChild(meta);
    sliderInner.appendChild(slide);
    // grid
    const card = document.createElement('div'); card.className='staff-card';
    const cimg = document.createElement('img'); cimg.src = img.src; cimg.alt = s.name;
    const cname = document.createElement('div'); cname.className='name'; cname.textContent = s.name;
    const cpost = document.createElement('div'); cpost.className='post'; cpost.textContent = s.post;
    card.appendChild(cimg); card.appendChild(cname); card.appendChild(cpost);
    grid.appendChild(card);
  });
}

/* Simple slider controls */
let genIndex = 0, genSlides = null;
function generalShow(i){
  genSlides = genSlides || Array.from(document.querySelectorAll('#generalSliderInner .slide'));
  if(!genSlides.length) return;
  genIndex = (i + genSlides.length) % genSlides.length;
  const w = document.getElementById('generalSlider').clientWidth;
  document.getElementById('generalSliderInner').style.transform = `translateX(-${genIndex * w}px)`;
}
function generalNext(){ generalShow(genIndex+1); }
function generalPrev(){ generalShow(genIndex-1); }

let staffIndex = 0, staffSlides = null;
function staffShow(i){
  staffSlides = staffSlides || Array.from(document.querySelectorAll('#staffSliderInner .staff-slide'));
  if(!staffSlides.length) return;
  staffIndex = (i + staffSlides.length) % staffSlides.length;
  const w = document.getElementById('staffSlider').clientWidth;
  document.getElementById('staffSliderInner').style.transform = `translateX(-${staffIndex * w}px)`;
}
function staffNext(){ staffShow(staffIndex+1); }
function staffPrev(){ staffShow(staffIndex-1); }

/* Initialize */
(async function init(){
  await buildGeneralSlider();
  await buildStaffUI();
  window.addEventListener('resize', ()=>{ generalShow(genIndex); staffShow(staffIndex); });
})();
</script>
</body>
</html>
