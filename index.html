<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SB Public School — Photo Slider (Fade, Auto-height)</title>
<style>
:root{--accent:#0ea5a4;--bg:#fbfdff;--text:#0f1724}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
.slider-wrap{max-width:1100px;margin:20px auto;position:relative;border-radius:12px;overflow:visible}
.slider{position:relative;border-radius:12px;overflow:hidden;box-shadow:0 8px 30px rgba(16,24,40,0.08);background:#000;transition:height .45s ease}
.slide{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .8s ease;will-change:opacity;pointer-events:none}
.slide.active{opacity:1;pointer-events:auto}
.slide img{width:100%;height:auto;display:block;object-fit:cover}

/* controls */
.controls{position:absolute;left:12px;right:12px;top:50%;transform:translateY(-50%);display:flex;justify-content:space-between;pointer-events:none}
.btn{background:rgba(255,255,255,0.9);border:0;padding:10px;border-radius:999px;cursor:pointer;pointer-events:auto;box-shadow:0 6px 18px rgba(2,6,23,0.12)}
.dots{position:absolute;left:50%;transform:translateX(-50%);bottom:12px;display:flex;gap:8px;pointer-events:auto}
.dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.8);cursor:pointer;opacity:0.8}
.dot.active{background:var(--accent);transform:scale(1.2);opacity:1}
.play-toggle{position:absolute;right:16px;top:16px;background:rgba(255,255,255,0.95);padding:8px;border-radius:8px;border:0;cursor:pointer;box-shadow:0 6px 18px rgba(2,6,23,0.08)}

/* responsive */
@media(max-width:600px){ .slider-wrap{margin:12px} .btn{padding:8px} }
</style>
</head>
<body>
<div class="slider-wrap" id="sliderWrap" aria-label="School photo slider (fade)">
  <button class="play-toggle" id="playToggle" aria-pressed="false">Pause</button>
  <div class="slider" id="slider" role="region" aria-roledescription="carousel"></div>
  <div class="controls">
    <button class="btn" id="prev" aria-label="Previous">‹</button>
    <button class="btn" id="next" aria-label="Next">›</button>
  </div>
  <div class="dots" id="dots" role="tablist" aria-label="Slide dots"></div>
</div>

<script>
const IMAGES = [
  'slider_images/WhatsApp Image 2025-10-30 at 19.36.04_e42049db.jpg',
  'slider_images/WhatsApp Image 2025-11-16 at 10.33.39_5f42559c.jpg',
  'slider_images/WhatsApp Image 2025-11-16 at 10.33.38_3193ced1.jpg',
  'slider_images/WhatsApp Image 2025-10-30 at 19.35.04_d1684284.jpg',
  'slider_images/WhatsApp Image 2025-10-30 at 19.36.05_6d3a2a2d.jpg',
  'slider_images/WhatsApp Image 2025-10-30 at 19.36.04_66cb599d.jpg',
  'slider_images/WhatsApp Image 2025-11-16 at 10.33.37_c4bd2e68.jpg',
  'slider_images/WhatsApp Image 2025-11-16 at 10.33.48_b61cc87d.jpg',
  'slider_images/WhatsApp Image 2025-11-16 at 10.33.47_3953b4e7.jpg',
  'slider_images/WhatsApp Image 2025-11-18 at 16.35.11_763193a1.jpg',
];

const slider = document.getElementById('slider');
const sliderWrap = document.getElementById('sliderWrap');
const dotsWrap = document.getElementById('dots');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const playToggle = document.getElementById('playToggle');

let slides = [];
let index = 0;
let timer = null;
let interval = 4000; // autoplay interval

function createSlides(){
  IMAGES.forEach((src,i)=>{
    const s = document.createElement('div');
    s.className = 'slide';
    s.setAttribute('role','group');
    s.setAttribute('aria-roledescription','slide');
    s.setAttribute('aria-label', `Slide ${i+1} of ${IMAGES.length}`);
    const img = document.createElement('img');
    img.src = src;
    img.alt = `School photo ${i+1}`;
    // when image loads, if it's the first and active adjust container height
    img.addEventListener('load', ()=>{
      if(i===index) adjustHeightTo(img);
    });
    s.appendChild(img);
    slider.appendChild(s);
    slides.push(s);

    const d = document.createElement('button');
    d.className = 'dot';
    d.setAttribute('aria-label', 'Go to slide ' + (i+1));
    d.addEventListener('click', ()=>{ pause(); goTo(i); });
    dotsWrap.appendChild(d);
  });
  // mark first active
  if(slides[0]) slides[0].classList.add('active');
  updateDots();
  // set initial height after short delay to allow image to load
  setTimeout(()=>{ const img = slides[0].querySelector('img'); if(img && img.complete) adjustHeightTo(img); }, 300);
}

function adjustHeightTo(img){
  // compute natural height based on current slider width to preserve aspect ratio
  const wrapWidth = slider.clientWidth || sliderWrap.clientWidth;
  if(!img.naturalWidth) return;
  const h = Math.round((img.naturalHeight / img.naturalWidth) * wrapWidth);
  // limit max height for better UX
  const maxH = Math.round(window.innerHeight * 0.65);
  const finalH = Math.min(h, maxH);
  slider.style.height = finalH + 'px';
}

function goTo(i){
  index = (i + slides.length) % slides.length;
  slides.forEach((s, idx)=> s.classList.toggle('active', idx===index));
  updateDots();
  // adjust height to current image
  const img = slides[index].querySelector('img');
  if(img && img.complete) adjustHeightTo(img);
  else if(img) img.addEventListener('load', ()=> adjustHeightTo(img), { once:true });
}

function nextSlide(){ goTo(index+1); }
function prevSlide(){ goTo(index-1); }

function updateDots(){
  const dots = dotsWrap.children;
  for(let i=0;i<dots.length;i++){ dots[i].classList.toggle('active', i===index); }
}

function start(){ if(timer) clearInterval(timer); timer = setInterval(nextSlide, interval); playToggle.textContent = 'Pause'; playToggle.setAttribute('aria-pressed','false'); }
function pause(){ if(timer) clearInterval(timer); timer = null; playToggle.textContent = 'Play'; playToggle.setAttribute('aria-pressed','true'); }

nextBtn.addEventListener('click', ()=>{ pause(); nextSlide(); });
prevBtn.addEventListener('click', ()=>{ pause(); prevSlide(); });
playToggle.addEventListener('click', ()=>{ if(timer) pause(); else start(); });

// keyboard
document.addEventListener('keydown', (e)=>{ if(e.key==='ArrowRight'){ pause(); nextSlide(); } else if(e.key==='ArrowLeft'){ pause(); prevSlide(); } });

// swipe support
let startX=0;
slider.addEventListener('touchstart', e=> startX = e.touches[0].clientX);
slider.addEventListener('touchend', e=> { const dx = e.changedTouches[0].clientX - startX; if(Math.abs(dx)>40){ pause(); if(dx<0) nextSlide(); else prevSlide(); } });

// responsive: adjust height on resize
let resizeDeb;
window.addEventListener('resize', ()=>{ clearTimeout(resizeDeb); resizeDeb = setTimeout(()=>{ const img = slides[index] && slides[index].querySelector('img'); if(img && img.complete) adjustHeightTo(img); }, 120); });

// init
createSlides();
start();
</script>
</body>
</html>
